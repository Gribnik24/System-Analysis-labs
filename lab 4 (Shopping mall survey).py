import streamlit as st
import pandas as pd
import numpy as np

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
st.set_page_config(
    page_title="–û–ø—Ä–æ—Å",
    page_icon="üìä",
    layout="wide",
    initial_sidebar_state="collapsed"
)


def main():
    # –ó–∞–≥–æ–ª–æ–≤–æ–∫
    st.title('–û—Ü–µ–Ω–∫–∞ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–æ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤—É —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞')
    st.info("""
    –£–≤–∞–∂–∞–µ–º—ã–π —ç–∫—Å–ø–µ—Ä—Ç! –í —Ä–∞–º–∫–∞—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Å–∏–º –í–∞—Å –æ—Ü–µ–Ω–∏—Ç—å 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞:
    """)

    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã
    options = [
        '–î–æ—Å—Ç—Ä–æ–π–∫–∞ –æ–¥–Ω–æ—ç—Ç–∞–∂–Ω–æ–≥–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –ø–æ–º–µ—â–µ–Ω–∏—è –≤ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–º —Ä–∞–π–æ–Ω–µ –≥–æ—Ä–æ–¥–∞',
        '–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –Ω–æ–≤–æ–≥–æ —Å—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç–∞, —Ç—Ä–µ–±—É—é—â–µ–µ –∫—Ä—É–ø–Ω—ã—Ö –∫–∞–ø–∏—Ç–∞–ª–æ–≤–ª–æ–∂–µ–Ω–∏–π, —Å –≤—ã–≥–æ–¥–Ω—ã–º —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ–º',
        '–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ —Å—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç–∞ –∑–∞ —á–µ—Ä—Ç–æ–π –≥–æ—Ä–æ–¥–∞ —Å –Ω–µ–±–æ–ª—å—à–∏–º–∏ –∑–∞—Ç—Ä–∞—Ç–∞–º–∏',
        '–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ –Ω–∞ –æ–∫—Ä–∞–∏–Ω–µ –≥–æ—Ä–æ–¥–∞ (—Ä–∞–π–æ–Ω –æ—Å–Ω–∞—â–µ–Ω —Ä–∞–∑–≤–∏—Ç–æ–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–π —Å–µ—Ç—å—é –∏ –ø–∞—Ä–∫–∏–Ω–≥–æ–º)'
    ]

    # –°–æ–∑–¥–∞–µ–º DataFrame –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    df = pd.DataFrame({'–í–∞—Ä–∏–∞–Ω—Ç—ã': options})
    df.index = np.arange(1, len(df) + 1)
    st.table(df)

    # –í–≤–æ–¥ –§–ò–û
    st.markdown('–ü—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ–µ –§–ò–û:')
    name = st.text_input("–§–ò–û", placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –ø–æ–ª–Ω–æ–µ –∏–º—è")

    # –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã —Å —Å–ª–∞–π–¥–µ—Ä–∞–º–∏
    st.markdown('---')
    st.header('–ü–æ–ø–∞—Ä–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤')
    st.markdown('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ü–µ–Ω–∏—Ç–µ, –≤ —Å–∫–æ–ª—å–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –∏–∑ 15 –≤—ã —Å—á–∏—Ç–∞–µ—Ç–µ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç –ª—É—á—à–µ –¥—Ä—É–≥–æ–≥–æ:')

    # –°–æ–∑–¥–∞–µ–º —Å–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ü–µ–Ω–æ–∫
    scores = {}

    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –≤—Å–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–∞—Ä—ã –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
    for i in range(len(options)):
        for j in range(i + 1, len(options)):
            option_a = options[i]
            option_b = options[j]

            st.markdown(f'**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:** "{option_a}" **–ø—Ä–æ—Ç–∏–≤** "{option_b}"')

            # –°–æ–∑–¥–∞–µ–º –¥–≤–∞ —Å—Ç–æ–ª–±—Ü–∞ –¥–ª—è –ª—É—á—à–µ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            col1, col2 = st.columns(2)

            with col1:
                score_ab = st.slider(
                    f'–°–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ "{option_a}" –ª—É—á—à–µ, —á–µ–º "{option_b}"',
                    min_value=0,
                    max_value=15,
                    value=7,
                    key=f'{i}_{j}_ab',
                    help="0 - –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ª—É—á—à–µ, 15 - –≤—Å–µ–≥–¥–∞ –ª—É—á—à–µ"
                )

                # –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –æ—Ü–µ–Ω–∫–∏
                st.metric("–û—Ü–µ–Ω–∫–∞", f"{score_ab}/15")
                st.progress(score_ab / 15)

            with col2:
                score_ba = st.slider(
                    f'–°–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ "{option_b}" –ª—É—á—à–µ, —á–µ–º "{option_a}"',
                    min_value=0,
                    max_value=15,
                    value=7,
                    key=f'{i}_{j}_ba',
                    help="0 - –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ª—É—á—à–µ, 15 - –≤—Å–µ–≥–¥–∞ –ª—É—á—à–µ"
                )

                # –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –æ—Ü–µ–Ω–∫–∏
                st.metric("–û—Ü–µ–Ω–∫–∞", f"{score_ba}/15")
                st.progress(score_ba / 15)

            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ü–µ–Ω–∫–∏
            scores[f'{i}_{j}_ab'] = score_ab
            scores[f'{i}_{j}_ba'] = score_ba

            # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ (—Å—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å <= 15)
            total = score_ab + score_ba
            if total > 15:
                st.warning(f"‚ö†Ô∏è –°—É–º–º–∞ –æ—Ü–µ–Ω–æ–∫ ({total}) –ø—Ä–µ–≤—ã—à–∞–µ—Ç 15 —Å–ª—É—á–∞–µ–≤. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à–∏ –æ—Ü–µ–Ω–∫–∏.")
            elif total < 15:
                st.info(f"‚ÑπÔ∏è –í {15 - total} —Å–ª—É—á–∞—è—Ö –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–∞–≤–Ω–æ–∑–Ω–∞—á–Ω—ã.")

            st.markdown('---')

    # –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
    if st.button("üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç", type="primary", use_container_width=True):
        if not name.strip():
            st.error("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –§–ò–û –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π.")
        else:
            st.success(f'–ë–æ–ª—å—à–æ–µ —Å–ø–∞—Å–∏–±–æ, {name}! –í–∞—à–∏ –æ—Ç–≤–µ—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã.')


if __name__ == "__main__":
    main()